<!DOCTYPE html>
<html lang="en-us">
<head>
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131587033-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131587033-1');
</script>

<meta charset="utf-8">
<meta name="generator" content="Hugo 0.54.0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Lato:400,900" rel="stylesheet">
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,800" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/skeleton.css">
<link rel="stylesheet" href="/css/custom.css">
<title>Standardized Streams and Shells</title>
</head>

<body> 

 	<div class="topbar">
			<a id="homebutton" href="/">GSR</a>
			<a id="about" href="/about/about">about</a>
	</div>

  <div class="container"> 
  <header role="banner">
  <h1 id="title">Standardized Streams and Shells</h1>
  </header>
  <section>
  
   
  <i><span class="entry-meta"><time itemprop="datePublished" datetime="2019-05-21">May 21, 2019 </time></span></section></i>
  

  </section>
  <main role="main">
  <div>
        <article id="content">
           

<p><span style="color:grey;font-style: italic;font-size: 14px">
In this post we discuss how standardized streams (<code>stdin</code>/<code>stdout</code>/<code>stderr</code>) work on Linux, especially related to shells.
</span></p>

<p>Every well known operating system has a concept of standardized streams. These consist of standard input, output, and error. As their name purports, they are the standard places to read input, and send output. They&rsquo;re a crucial concept that allows various running procceses to easily communicate.</p>

<p>Standardized streams enable you to string together multiple commands with a pipe (<code>|</code>) in your shell like this:</p>

<p><code>$~ cat /dev/urandom | less</code></p>

<p>In this example, bash executes the commands on both sides of the pipe and writes the stdout of <code>cat</code> to stdin of <code>less</code>. For both, stderr is written to the terminal. Most programs, like <code>less</code>, are made to write to stdout/stderr and read from stdin for this exact reason.</p>

<p>When a new process is created, file descriptors are opened for each of these standardized streams. You can view each processes open file descriptors in <code>/proc</code> like this:</p>

<pre><code>$~ ls -l /proc/$PPID/fd
lrwx------ 1 root root 64 May 20 16:58 0 -&gt; /dev/pts/0
lrwx------ 1 root root 64 May 20 16:58 1 -&gt; /dev/pts/0
lrwx------ 1 root root 64 May 20 16:58 2 -&gt; /dev/pts/0
</code></pre>

<p>In the above output you can see that the process has file descriptors <code>0</code>, <code>1</code>, and <code>2</code>. By convention these correspond to <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> respecitvely. These all point to the pseudo-terminal <code>/dev/pts/0</code>.</p>

<p>Your terminal application runs a shell (such as bash or zsh) and provides for it a GUI to display input and output. When you open a terminal it has its own set of standard streams. As mentioned above, it also creates a special device file like <code>/dev/pts/0</code> which other processes can read from and write to. In addition to running the commands that you enter, it listens for their input and output from the pseudo-terminal device file. In the case of input, it passes it to the running command. In the case of output, it displays it to the terminal GUI.</p>

<h2 id="play-along-at-home">Play along at home</h2>

<p>You can actually access the standard streams of other proccesses. Try taking the following steps:</p>

<p>1) Open up two terminal sessions</p>

<p>2) From the first terminal run the command <code>ls -l /proc/$PPID/fd</code>. This will tell you what pseudo-terminal your shell is using to read from and write to.</p>

<p>3) In the second terminal write to the first pseudo-terminal device file with <code>echo &quot;testing&quot; &gt; /dev/pts/&lt;pts_number&gt;</code>.</p>

<p>4) Take a look at the first terminal for a special surprise!</p>

<p><i>If you&rsquo;re interested to see how to play with standardized streams in Go, take a look at <a href="https://github.com/grantseltzer/cmo/blob/022621ec394edbbd41af1cc8e370d7f28a2a0340/main.go#L47">this example</a></i></p>

        </article>
  </div>
<aside id="meta">
    <div>
    
     
    </div>

</aside>
</main>


	<footer role="contentinfo">
    <div class="hr"></div>
    
		<div>
        <a class="sociallink" href="mailto:grantseltzer-AT-gmail.com"><img class="socialimg" src="/social/email.png"/></a>
        <a class="sociallink" href="http://www.github.com/grantseltzer"><img class="socialimg" src="/social/github.png"/></a>
        <a class="sociallink" href="http://www.twitter.com/grantseltzer"><img class="socialimg" src="/social/twitter.png"/></a>
        <a class="sociallink" href="https://www.linkedin.com/in/grantseltzerrichman/"><img class="socialimg" src="/social/linkedin.png"/></a>
        <a class="sociallink" href="https://www.goodreads.com/user/show/50650128-grant-seltzer"><img class="socialimg" src="/social/book.png"></a>
        <a class="sociallink" href="/photos/photos"><img class="socialimg" src="/social/camera.png"></a>

		</div>
		<div class="copyright">Copyright &copy; 2018 - 2019</div>
	</footer>

  </div>

</body>
</html>
